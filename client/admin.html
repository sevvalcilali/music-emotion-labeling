<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Annotation Admin</title>
    <link rel="stylesheet" href="/client/styles.css?v=9" />
  </head>
  <body>
    <div class="page">
      <header class="header">
        <div>
          <p class="eyebrow">Admin Panel</p>
          <h1>Yonetici Kontrolleri ve Ozetler</h1>
          <p class="subtitle">
            Sarki akisini yonetin, son cevaplari goruntuleyin ve ozetleri
            indirin.
          </p>
        </div>
        <div class="song-card">
          <span class="label">Aktif sarki</span>
          <div id="admin-song-label" class="song-title">Yukleniyor...</div>
          <div id="admin-song-meta" class="song-meta"></div>
        </div>
      </header>

      <main class="content">
        <section class="card">
          <h2>Sarki Kontrolleri</h2>
          <div class="summary-controls">
            <button id="admin-prev" class="ghost" type="button">Prev Song</button>
            <button id="admin-next" class="ghost" type="button">Next Song</button>
            <label class="field">
              <span>Set Index</span>
              <input id="set-index" type="number" min="0" value="0" />
            </label>
            <button id="set-index-btn" class="primary" type="button">Set</button>
          </div>
        </section>

        <section class="card">
          <h2>Sarki Oynatici</h2>
          <div class="summary-controls">
            <span class="status">Sadece sarki adi ve Spotify linki gosterilir.</span>
          </div>
          <div id="song-list" class="song-list"></div>
        </section>

        <section class="card">
          <h2>Son Yanitlar</h2>
          <div class="summary-controls">
            <button id="refresh-responses" class="ghost" type="button">
              Refresh
            </button>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>timestamp</th>
                  <th>participant_id</th>
                  <th>song_index</th>
                  <th>song_title</th>
                  <th>emotion</th>
                </tr>
              </thead>
              <tbody id="responses-body"></tbody>
            </table>
          </div>
        </section>

        <section class="card">
          <h2>Katilimci Detayi</h2>
          <div class="summary-controls">
            <label class="field">
              <span>Katilimci</span>
              <select id="participant-select"></select>
            </label>
            <button id="refresh-participant" class="ghost" type="button">
              Refresh
            </button>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>song_index</th>
                  <th>song_title</th>
                  <th>emotion</th>
                  <th>timestamp</th>
                </tr>
              </thead>
              <tbody id="participant-rows"></tbody>
            </table>
          </div>
        </section>

        <section class="card">
          <h2>Ozet</h2>
          <div class="summary-controls">
            <label class="field">
              <span>Song</span>
              <select id="summary-song"></select>
            </label>
            <button id="refresh-summary" class="ghost" type="button">
              Refresh
            </button>
            <button id="export-csv" class="primary" type="button">
              Export CSV
            </button>
          </div>

          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>song_index</th>
                  <th>song_title</th>
                  <th>unique_participants</th>
                  <th>mood_count</th>
                  <th>emotion_count</th>
                  <th>total_rows</th>
                </tr>
              </thead>
              <tbody id="summary-by-song"></tbody>
            </table>
          </div>

          <div class="summary-grid">
            <div class="summary-block">
              <h3>Secilen Duygular</h3>
              <ul id="summary-emotions"></ul>
            </div>
            <div class="summary-block">
              <h3>Mood Distribution</h3>
              <ul id="summary-mood"></ul>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script src="/client/admin.js?v=10" defer></script>
  </body>
</html>
